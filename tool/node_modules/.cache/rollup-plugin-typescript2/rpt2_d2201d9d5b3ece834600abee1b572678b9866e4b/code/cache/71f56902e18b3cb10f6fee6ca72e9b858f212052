{"code":"import { ui } from \"../../../../ui/layaMaxUI\";\r\nvar Event = Laya.Event;\r\nexport default class Table extends ui.Games.BenzBmw.TableUI {\r\n    constructor() {\r\n        super();\r\n        this.diraction = new Laya.Vector2();\r\n        this.curMoveIndex = 0;\r\n        this.changeDirList = [\r\n            { x: 1712, y: 709, r: 58 },\r\n            { x: 1478, y: 858, r: 90 },\r\n            { x: 437.5, y: 858, r: 121 },\r\n            { x: 202.5, y: 682, r: 180 },\r\n            { x: 211, y: 254, r: 236 },\r\n            { x: 455, y: 110, r: 270 },\r\n            { x: 1478, y: 116, r: 301 },\r\n            { x: 1707, y: 242, r: 360 },\r\n        ];\r\n        this.winPriceList = [\r\n            { x: 1607.5, y: 790, beforIndex: 1 },\r\n            { x: 1118.5, y: 867, beforIndex: 2 },\r\n            { x: 794, y: 864, beforIndex: 2 },\r\n            { x: 318, y: 790, beforIndex: 3 },\r\n            { x: 310.5, y: 187, beforIndex: 5 },\r\n            { x: 803, y: 107, beforIndex: 6 },\r\n            { x: 1111, y: 107, beforIndex: 6 },\r\n            { x: 1593.5, y: 172, beforIndex: 7 },\r\n        ];\r\n    }\r\n    onAwake() {\r\n        this.dazhong.on(Event.CLICK, this, () => {\r\n            this.winPrice = this.winPriceList[0];\r\n        });\r\n        this.baoma.on(Event.CLICK, this, () => {\r\n            this.winPrice = this.winPriceList[1];\r\n        });\r\n        this.benchi.on(Event.CLICK, this, () => {\r\n            this.winPrice = this.winPriceList[2];\r\n        });\r\n        this.baoshijie.on(Event.CLICK, this, () => {\r\n            this.winPrice = this.winPriceList[3];\r\n        });\r\n        this.dabaoshijie.on(Event.CLICK, this, () => {\r\n            this.winPrice = this.winPriceList[4];\r\n        });\r\n        this.dabenchi.on(Event.CLICK, this, () => {\r\n            this.winPrice = this.winPriceList[5];\r\n        });\r\n        this.dabaoma.on(Event.CLICK, this, () => {\r\n            this.winPrice = this.winPriceList[6];\r\n        });\r\n        this.dadazhong.on(Event.CLICK, this, () => {\r\n            this.winPrice = this.winPriceList[7];\r\n        });\r\n        this.go_btn.on(Event.CLICK, this, () => {\r\n            this.stratMove();\r\n        });\r\n    }\r\n    stratMove() {\r\n        let target = this.changeDirList[this.curMoveIndex];\r\n        this.winPrice = null;\r\n        this.speed = 15;\r\n        this.moveTo(target);\r\n    }\r\n    moveTo(target) {\r\n        Laya.Vector2.normalize(new Laya.Vector2(target.x - this.car_image.x, target.y - this.car_image.y), this.diraction);\r\n        Laya.timer.frameLoop(1, this, () => {\r\n            this.car_image.x += this.diraction.x * this.speed;\r\n            this.car_image.y += this.diraction.y * this.speed;\r\n            let tempVec = new Laya.Vector2(target.x - this.car_image.x, target.y - this.car_image.y);\r\n            let length = Laya.Vector2.scalarLength(tempVec);\r\n            if (length < 8) {\r\n                this.car_image.x = target.x;\r\n                this.car_image.y = target.y;\r\n                target.r && (this.car_image.rotation = target.r);\r\n                Laya.timer.clearAll(this);\r\n                if (target != this.winPrice) {\r\n                    this.curMoveIndex = ++this.curMoveIndex % this.changeDirList.length;\r\n                    let pos = this.changeDirList[this.curMoveIndex];\r\n                    if (this.winPrice && this.winPrice.beforIndex == this.curMoveIndex && this.speed < 7) {\r\n                        pos = this.winPrice;\r\n                    }\r\n                    this.moveTo(pos);\r\n                }\r\n                else {\r\n                    console.log(\"到站了\");\r\n                }\r\n            }\r\n            if (this.winPrice) {\r\n                if (this.speed > 10)\r\n                    this.speed -= 0.03;\r\n                else if (this.speed > 8)\r\n                    this.speed -= 0.02;\r\n                else if (this.speed > 5)\r\n                    this.speed -= 0.015;\r\n                else if (this.speed > 3)\r\n                    this.speed -= 0.005;\r\n            }\r\n        });\r\n    }\r\n}\r\n","references":["C:/Users/Administrator/Documents/majiang/src/ui/layaMaxUI.ts"]}
