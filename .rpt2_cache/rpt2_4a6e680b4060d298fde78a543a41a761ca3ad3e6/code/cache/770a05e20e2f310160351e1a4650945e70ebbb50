{
  "code": "var TimeLine = Laya.TimeLine;\r\nvar Event = Laya.Event;\r\nimport CommonPopup from \"../Application/GameCommonUI/CommonPopup\";\r\nimport CommonTaost from \"../Application/GameCommonUI/CommonToast\";\r\nexport default class PublicFun {\r\n    constructor() {\r\n        this.timeLine = new TimeLine();\r\n        this.viewList = [];\r\n    }\r\n    static getinstance() {\r\n        if (this.instance == null)\r\n            this.instance = new PublicFun();\r\n        return this.instance;\r\n    }\r\n    showAlert(node, back) {\r\n        if (!node.getChildByName(\"back_gray\")) {\r\n            let rect = new Laya.Sprite();\r\n            rect.graphics.drawRect(0, 0, Laya.stage.width, Laya.stage.height, \"#333333\");\r\n            rect.name = \"back_gray\";\r\n            rect.zOrder = -9999999;\r\n            rect.alpha = 0.3;\r\n            node.addChild(rect);\r\n        }\r\n        this.viewList.push(node);\r\n        this.startAlert(node);\r\n    }\r\n    startAlert(node) {\r\n        this.setCenter(node);\r\n        let x = Laya.stage.width / 2;\r\n        let y = Laya.stage.height / 2;\r\n        node.visible = true;\r\n        node.active = true;\r\n        node.x = x;\r\n        node.y = y;\r\n        node.scaleX = 0;\r\n        node.scaleY = 0;\r\n        this.timeLine = new TimeLine();\r\n        this.timeLine.addLabel(\"turnRight\", 0).to(node, { scaleX: 1.1, scaleY: 1.1 }, 200, null, 0)\r\n            .addLabel(\"turnLeft\", 0).to(node, { scaleX: 1, scaleY: 1 }, 100, null, 0);\r\n        this.timeLine.play(0, false);\r\n        this.timeLine.on(Event.COMPLETE, this, this.onComplete);\r\n        this.timeLine.on(Event.LABEL, this, this.onLabel);\r\n    }\r\n    hideAlert(node, completeFun) {\r\n        this.timeLine = new TimeLine();\r\n        this.timeLine.addLabel(\"turnRight\", 0).to(node, { scaleX: 1.1, scaleY: 1.1 }, 200, null, 0)\r\n            .addLabel(\"turnDown\", 0).to(node, { scaleX: 0, scaleY: 0 }, 200, null, 0);\r\n        this.timeLine.play(0, false);\r\n        this.timeLine.on(Event.COMPLETE, this, () => {\r\n            node.active = false;\r\n            node.visible = false;\r\n            completeFun && completeFun();\r\n            let view = this.viewList.pop();\r\n            view && view.onHide && view.onHide();\r\n        });\r\n    }\r\n    showConfirm(str, callBack) {\r\n        let box = new CommonPopup(str, callBack);\r\n        let self = this;\r\n        box.onAwake = function () {\r\n            this.setText(str);\r\n            this.close_btn.on(Event.CLICK, this, () => {\r\n                self.hideAlert(this, () => this.removeSelf());\r\n            });\r\n            this.cancel_btn.on(Event.CLICK, this, () => {\r\n                self.hideAlert(this, () => this.removeSelf());\r\n            });\r\n            this.confirm_btn.on(Event.CLICK, this, () => {\r\n                this.callBack && this.callBack();\r\n                self.hideAlert(this, () => this.removeSelf());\r\n            });\r\n            let isHide = (this.callBack != null);\r\n            this.confirm_btn.visible = isHide;\r\n            this.cancel_btn.visible = isHide;\r\n        };\r\n        Laya.stage.addChild(box);\r\n        this.showAlert(box);\r\n    }\r\n    showTaost(str) {\r\n        Laya.stage.addChild(new CommonTaost(str));\r\n    }\r\n    setCenter(node) {\r\n        let rect = node.getBounds();\r\n        node.pivotX = (rect.width || node.width) / 2;\r\n        node.pivotY = (rect.height || node.height) / 2;\r\n        node.x += node.pivotX;\r\n        node.y += node.pivotY;\r\n    }\r\n    onComplete() {\r\n    }\r\n    onLabel(label) {\r\n    }\r\n    getWorldScale(target) {\r\n        let x = target.scaleX;\r\n        let y = target.scaleY;\r\n        let parent = target.parent;\r\n        while (parent != Laya.stage) {\r\n            x *= parent.scaleX;\r\n            y *= parent.scaleY;\r\n            parent = parent.parent;\r\n        }\r\n        return { x, y };\r\n    }\r\n    getWorldPos(target) {\r\n        let x = target.x;\r\n        let y = target.y;\r\n        let parent = target.parent;\r\n        while (parent != Laya.stage) {\r\n            x += parent.x;\r\n            y += parent.y;\r\n            parent = parent.parent;\r\n        }\r\n        return { x, y };\r\n    }\r\n    getRecvPos(target) {\r\n        let x = Math.random() * (target.width - 20) - 20;\r\n        let y = Math.random() * (target.height - 20) - 20;\r\n        return { x, y };\r\n    }\r\n    getMineIndex(list, mineId) {\r\n        for (let i = 0; i < list.length, i++;) {\r\n            if (list[i].id == mineId)\r\n                return i;\r\n        }\r\n        return -1;\r\n    }\r\n    getPUserPos(myPos, OtherPos, maxPlayer) {\r\n        let pos = OtherPos - myPos;\r\n        if (pos < 0) {\r\n            pos += maxPlayer;\r\n        }\r\n        return pos;\r\n    }\r\n}\r\n",
  "references": [
    "C:/Users/Administrator/Documents/majiang/src/Application/GameCommonUI/CommonPopup.ts",
    "C:/Users/Administrator/Documents/majiang/src/Application/GameCommonUI/CommonToast.ts"
  ]
}
