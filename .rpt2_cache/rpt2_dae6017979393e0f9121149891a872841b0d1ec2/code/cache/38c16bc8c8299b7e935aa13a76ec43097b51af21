{
  "code": "import { ui } from \"./../ui/layaMaxUI\";\r\nvar Handler = Laya.Handler;\r\nvar Tween = Laya.Tween;\r\nexport default class playScene extends ui.playSceneUI {\r\n    constructor() {\r\n        super();\r\n        this.cardUnknow = new Array();\r\n        this.dealTimes = 0;\r\n    }\r\n    createChildren() {\r\n        super.createChildren();\r\n        Laya.Scene3D.load(\"res/LayaScene_playScene/Conventional/playScene.ls\", Laya.Handler.create(this, this.onCreated));\r\n        this.fapai.clickHandler = new Handler(this, this.onClickButton, [this.fapai]);\r\n        this.mopai.clickHandler = new Handler(this, this.onClickMopai, [this.mopai]);\r\n        this.dapai.clickHandler = new Handler(this, this.onClickDapai, [this.dapai]);\r\n    }\r\n    onClickDapai(button) {\r\n        let card5 = this.downHand.getChildAt(5);\r\n        card5.active = false;\r\n        let card13 = this.downHand.getChildAt(13);\r\n        Tween.to(card13.transform, { localPositionZ: card13.transform.localPositionZ - 0.05, localRotationEulerY: 30 }, 300, null, Handler.create(this, () => {\r\n            Tween.to(card13.transform, { localPositionX: card5.transform.localPositionX, localRotationEulerY: 0 }, 500, null, Handler.create(this, () => {\r\n                Tween.to(card13.transform, { localPositionZ: 0 }, 300);\r\n            }));\r\n        }));\r\n    }\r\n    onClickMopai(button) {\r\n        console.log(\"摸牌哦\");\r\n        let targetCard = this.downHand.getChildAt(13);\r\n        if (!targetCard.active) {\r\n            let card = this.cardUnknow.shift();\r\n            card.active = false;\r\n            targetCard.active = true;\r\n        }\r\n    }\r\n    onClickButton(button) {\r\n        console.log(\"发牌哦\");\r\n        this.handArr = [this.downHand, this.leftHand, this.upHand, this.rightHand];\r\n        Laya.timer.loop(100, this, this.dealCards);\r\n    }\r\n    dealCards() {\r\n        let curHand = this.handArr[this.dealTimes % 4];\r\n        let integer = Math.floor(this.dealTimes / 4);\r\n        if (integer <= 2) {\r\n            for (let i = integer * 4; i < (integer + 1) * 4; i++) {\r\n                curHand.getChildAt(i).active = true;\r\n            }\r\n            for (let i = 0; i < 4; i++) {\r\n                let card = this.cardUnknow.shift();\r\n                card.active = false;\r\n            }\r\n        }\r\n        else {\r\n            curHand.getChildAt(integer * 4).active = true;\r\n            let card = this.cardUnknow.shift();\r\n            card.active = false;\r\n        }\r\n        if (++this.dealTimes >= 16) {\r\n            Laya.timer.clear(this, this.dealCards);\r\n        }\r\n    }\r\n    onCreated(scene) {\r\n        scene.zOrder = -1;\r\n        Laya.stage.addChild(scene);\r\n        scene.getChildByName(\"骰子\").active = false;\r\n        let pengDown = scene.getChildByName(\"pengDown\");\r\n        let pengLeft = scene.getChildByName(\"pengLeft\");\r\n        let pengRight = scene.getChildByName(\"pengRight\");\r\n        let pengUp = scene.getChildByName(\"pengUp\");\r\n        pengDown.active = false;\r\n        pengLeft.active = false;\r\n        pengRight.active = false;\r\n        pengUp.active = false;\r\n        let leftShowed = scene.getChildByName(\"leftShowed\");\r\n        let rightShowed = scene.getChildByName(\"rightShowed\");\r\n        let downShowed = scene.getChildByName(\"downShowed\");\r\n        let upShowed = scene.getChildByName(\"upShowed\");\r\n        leftShowed.active = false;\r\n        rightShowed.active = false;\r\n        downShowed.active = false;\r\n        upShowed.active = false;\r\n        this.leftHand = scene.getChildByName(\"leftHand\");\r\n        this.rightHand = scene.getChildByName(\"rightHand\");\r\n        this.downHand = scene.getChildByName(\"downHand\");\r\n        this.upHand = scene.getChildByName(\"upHand\");\r\n        for (let i = 0; i < this.leftHand.numChildren; i++) {\r\n            this.leftHand.getChildAt(i).active = false;\r\n        }\r\n        for (let i = 0; i < this.rightHand.numChildren; i++) {\r\n            this.rightHand.getChildAt(i).active = false;\r\n        }\r\n        for (let i = 0; i < this.downHand.numChildren; i++) {\r\n            this.downHand.getChildAt(i).active = false;\r\n        }\r\n        for (let i = 0; i < this.upHand.numChildren; i++) {\r\n            this.upHand.getChildAt(i).active = false;\r\n        }\r\n        let up = scene.getChildByName(\"up\");\r\n        let left = scene.getChildByName(\"left\");\r\n        let down = scene.getChildByName(\"down\");\r\n        let right = scene.getChildByName(\"right\");\r\n        for (let i = 0; i < down.numChildren / 2; i++) {\r\n            this.cardUnknow.push(down.getChildAt(i));\r\n            this.cardUnknow.push(down.getChildAt(i + down.numChildren / 2));\r\n        }\r\n        for (let i = 0; i < left.numChildren / 2; i++) {\r\n            this.cardUnknow.push(left.getChildAt(i));\r\n            this.cardUnknow.push(left.getChildAt(i + left.numChildren / 2));\r\n        }\r\n        for (let i = 0; i < up.numChildren / 2; i++) {\r\n            this.cardUnknow.push(up.getChildAt(i));\r\n            this.cardUnknow.push(up.getChildAt(i + up.numChildren / 2));\r\n        }\r\n        for (let i = 0; i < right.numChildren / 2; i++) {\r\n            this.cardUnknow.push(right.getChildAt(i));\r\n            this.cardUnknow.push(right.getChildAt(i + right.numChildren / 2));\r\n        }\r\n    }\r\n}\r\n",
  "references": [
    "C:/Users/lenovo/Documents/3dmajiang/majiang/src/ui/layaMaxUI.ts"
  ]
}
